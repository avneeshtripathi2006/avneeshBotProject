/* ======================================================================
   üöÄ AVNEESH BOT PROJECT: PREMIUM AI INTERFACE (PART 1/4)
   Design System: Midnight Obsidian & Glassmorphism
   Author: Avneesh Tripathi (CSE Kanpur)
   Target: High-Performance SaaS UI
   ======================================================================
   
   DOCUMENTATION:
   This design system is built on a custom set of Design Tokens. 
   We use CSS variables to handle theming for different AI modes 
   (Casual, Roast, etc.) and to ensure accessibility.
*/

/* ----------------------------------------------------------------------
   üíé 1. DESIGN TOKENS (CSS VARIABLES)
   ---------------------------------------------------------------------- 
*/
:root {
  /* --- Core Palette: Dark Mode Foundations --- */
  --bg-deep-obsidian: #010409; /* Global background */
  --bg-card-glass: rgba(13, 17, 23, 0.85); /* Transparent cards */
  --bg-sidebar: #0d1117; /* Sidebar foundation */
  --bg-input: #161b22; /* Input fields and secondary areas */

  /* --- Primary Accents: Emerald Forest --- */
  --accent-main: #238636; /* Brand primary color */
  --accent-glow: #2ea043; /* Brand glow color */
  --accent-alpha: rgba(35, 134, 54, 0.4); /* Glow/Shadow highlights */
  --accent-soft: rgba(35, 134, 54, 0.1); /* Subtle background tints */

  /* --- Signal System: Functional Colors --- */
  --sys-success: #3fb950; /* Positive status messages */
  --sys-danger: #f85149; /* Error and critical alerts */
  --sys-warning: #d29922; /* Warning and beta badges */
  --sys-info: #58a6ff; /* Information and links */

  /* --- Typography: Ghost White & Steel --- */
  --txt-pure: #ffffff; /* Headers and primary emphasis */
  --txt-main: #e6edf3; /* Primary reading text */
  --txt-muted: #8b949e; /* Secondary labels and icons */
  --txt-dim: #7d8590; /* De-emphasized metadata */

  /* --- Border & Geometry Tokens --- */
  --brd-main: #30363d; /* Standard system borders */
  --brd-bright: #484f58; /* Hover and focus border states */
  --brd-glass: rgba(255, 255, 255, 0.1); /* Highlights for glass edges */

  --radius-xs: 4px;
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 24px;
  --radius-full: 9999px;

  /* --- Elevation & Depth Systems --- */
  --shadow-flat: 0 1px 2px rgba(0, 0, 0, 0.1);
  --shadow-raised: 0 8px 24px rgba(0, 0, 0, 0.4);
  --shadow-float: 0 16px 48px -12px rgba(0, 0, 0, 0.6);
  --glow-auth: 0 0 100px var(--accent-alpha);

  /* --- Animation & Transition Timing --- */
  --timing-fast: 150ms;
  --timing-std: 300ms;
  --timing-slow: 600ms;
  --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-pop: cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* ----------------------------------------------------------------------
   üõ†Ô∏è 2. GLOBAL RESET & SCROLLBAR ORCHESTRATION
   ---------------------------------------------------------------------- 
*/
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  background-color: var(--bg-deep-obsidian);
  color: var(--txt-main);
  font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI",
    sans-serif;
  line-height: 1.6;
  height: 100vh;
  width: 100vw;
  overflow: hidden; /* Scrollers are managed in sub-containers */
}

/* Custom Scrollbar Architecture for Modern SaaS Feel */
::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: var(--brd-main);
  border-radius: var(--radius-full);
  border: 3px solid var(--bg-deep-obsidian);
}

::-webkit-scrollbar-thumb:hover {
  background: var(--brd-bright);
}

/* Standard selection colors for CSE project identity */
::selection {
  background-color: var(--accent-alpha);
  color: var(--txt-pure);
}

/* ----------------------------------------------------------------------
   üîê 3. AUTHENTICATION MODULE (AUTHVIEW)
   ---------------------------------------------------------------------- 
*/

.auth-screen {
  height: 100vh;
  width: 100vw;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
  background: radial-gradient(circle at 50% 50%, #161b22 0%, #010409 100%);
}

/* Advanced background glow for depth and premium feel */
.auth-background-glow {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 800px;
  height: 800px;
  transform: translate(-50%, -50%);
  background: var(--accent-alpha);
  filter: blur(150px);
  border-radius: var(--radius-full);
  z-index: 1;
  opacity: 0.4;
  pointer-events: none;
  animation: authGlowPulse 10s infinite var(--ease-smooth);
}

@keyframes authGlowPulse {
  0%,
  100% {
    opacity: 0.4;
    transform: translate(-50%, -50%) scale(1);
  }
  50% {
    opacity: 0.6;
    transform: translate(-50%, -50%) scale(1.15);
  }
}

.auth-card-premium {
  position: relative;
  z-index: 2;
  width: 100%;
  max-width: 460px;
  padding: 56px;
  background: var(--bg-card-glass);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--brd-glass);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-float);
  display: flex;
  flex-direction: column;
  gap: 32px;
  animation: authSlideUp var(--timing-slow) var(--ease-pop);
}

@keyframes authSlideUp {
  from {
    opacity: 0;
    transform: translateY(40px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Branding Section Styling */
.auth-branding-section {
  text-align: center;
}

.auth-visual-identity {
  width: 72px;
  height: 72px;
  margin: 0 auto 24px;
  background: var(--bg-sidebar);
  border: 2px solid var(--accent-main);
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 0 25px var(--accent-alpha);
}

.identity-bolt {
  font-size: 2.2rem;
  color: var(--accent-main);
  filter: drop-shadow(0 0 8px var(--accent-alpha));
}

.auth-main-title {
  font-size: 2.25rem;
  font-weight: 900;
  color: var(--txt-pure);
  letter-spacing: -0.05em;
  margin-bottom: 12px;
}

.auth-v-badge {
  font-size: 0.8rem;
  padding: 4px 10px;
  background: var(--sys-warning);
  color: #000;
  border-radius: var(--radius-sm);
  vertical-align: middle;
  margin-left: 8px;
  font-weight: 800;
}

.auth-helper-text {
  font-size: 1rem;
  color: var(--txt-muted);
  font-weight: 500;
}

/* Alert Boxes for Auth Status */
.auth-alert-box {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 16px 20px;
  border-radius: var(--radius-md);
  font-size: 0.95rem;
  font-weight: 600;
  animation: alertShake 0.4s var(--ease-smooth);
}

@keyframes alertShake {
  0%,
  100% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-5px);
  }
  75% {
    transform: translateX(5px);
  }
}

.auth-alert-box.status-err {
  background: rgba(248, 81, 73, 0.1);
  border: 1px solid rgba(248, 81, 73, 0.2);
  color: var(--sys-danger);
}

.auth-alert-box.status-ok {
  background: rgba(63, 185, 80, 0.1);
  border: 1px solid rgba(63, 185, 80, 0.2);
  color: var(--sys-success);
}

/* Form Container Logic */
.auth-form-container {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.auth-input-group {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.auth-label {
  font-size: 0.85rem;
  font-weight: 700;
  color: var(--txt-main);
  padding-left: 4px;
  letter-spacing: 0.02em;
}

.auth-field {
  width: 100%;
  padding: 14px 18px;
  background: var(--bg-deep-obsidian);
  border: 1px solid var(--brd-main);
  border-radius: var(--radius-md);
  color: var(--txt-pure);
  font-size: 1.05rem;
  transition: all var(--timing-fast) var(--ease-smooth);
}

.auth-field:focus {
  outline: none;
  border-color: var(--accent-main);
  background: var(--bg-sidebar);
  box-shadow: 0 0 0 4px var(--accent-soft);
}

.auth-password-control {
  position: relative;
  width: 100%;
}

.auth-visibility-toggle {
  position: absolute;
  right: 14px;
  top: 50%;
  transform: translateY(-50%);
  background: transparent;
  border: none;
  color: var(--txt-muted);
  font-size: 0.75rem;
  font-weight: 800;
  cursor: pointer;
  padding: 6px 10px;
  border-radius: var(--radius-sm);
  transition: color 0.2s;
}

.auth-visibility-toggle:hover {
  color: var(--txt-pure);
  background: var(--bg-input);
}

/* Action Buttons */
.auth-action-btn {
  width: 100%;
  padding: 16px;
  background: var(--accent-main);
  color: var(--txt-pure);
  border: none;
  border-radius: var(--radius-md);
  font-size: 1.1rem;
  font-weight: 800;
  cursor: pointer;
  transition: all var(--timing-std) var(--ease-smooth);
  margin-top: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.auth-action-btn:hover:not(:disabled) {
  background: var(--accent-glow);
  transform: translateY(-2px);
  box-shadow: 0 8px 20px var(--accent-alpha);
}

.auth-action-btn:disabled {
  opacity: 0.7;
  cursor: not-allowed;
  background: var(--txt-dim);
}

/* Premium Spinner */
.auth-loader-dots {
  width: 24px;
  height: 24px;
  border: 3px solid rgba(255, 255, 255, 0.2);
  border-top: 3px solid #fff;
  border-radius: var(--radius-full);
  animation: spinLoader 0.8s linear infinite;
}

@keyframes spinLoader {
  to {
    transform: rotate(360deg);
  }
}

/* Footer Navigation */
.auth-footer-navigation {
  text-align: center;
}

.auth-mode-switch {
  background: transparent;
  border: none;
  color: var(--sys-info);
  font-size: 0.95rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}

.auth-mode-switch:hover {
  color: var(--txt-pure);
  text-decoration: underline;
}

/* Guest Bypass Logic */
.auth-guest-bypass {
  margin-top: 10px;
}

.bypass-divider {
  display: flex;
  align-items: center;
  gap: 20px;
  margin-bottom: 24px;
}

.bypass-divider::before,
.bypass-divider::after {
  content: "";
  flex: 1;
  height: 1px;
  background: var(--brd-main);
}

.bypass-divider span {
  font-size: 0.75rem;
  font-weight: 900;
  color: var(--txt-dim);
  letter-spacing: 0.15em;
}

.auth-guest-cta {
  width: 100%;
  padding: 14px;
  background: transparent;
  color: var(--txt-main);
  border: 1px solid var(--brd-main);
  border-radius: var(--radius-md);
  font-size: 1rem;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s;
}

.auth-guest-cta:hover {
  background: rgba(255, 255, 255, 0.04);
  border-color: var(--txt-muted);
  color: var(--txt-pure);
}

.auth-legal-footer {
  margin-top: 40px;
  padding-top: 24px;
  border-top: 1px solid var(--brd-main);
  text-align: center;
}

.auth-legal-footer p {
  font-size: 0.75rem;
  color: var(--txt-dim);
  font-weight: 500;
}

/* ----------------------------------------------------------------------
   (End of Part 1/4 - Design Tokens & Auth View)
   ======================================================================
*/
/* ======================================================================
   üöÄ AVNEESH BOT PROJECT: PREMIUM AI INTERFACE (PART 2/4)
   Focus: Sidebar Layout, History Scroller, and CRUD UI Components
   ======================================================================
*/

/* ----------------------------------------------------------------------
   üì± 4. SIDEBAR CONTAINER (SIDEBAR-ENGINE)
   ----------------------------------------------------------------------
   The sidebar uses a fixed width and handles mobile transitions using 
   the 'left' property and hardware-accelerated transitions.
*/

.sidebar-engine {
  width: var(--sidebar-width);
  height: 100vh;
  background-color: var(--bg-sidebar);
  border-right: 1px solid var(--brd-main);
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  position: relative;
  z-index: 999;
  transition: left var(--timing-std) var(--ease-smooth);
  box-shadow: var(--shadow-raised);
}

/* Mobile Responsiveness for Sidebar */
@media (max-width: 1024px) {
  .sidebar-engine {
    position: fixed;
    left: -100%; /* Hidden off-screen by default */
    top: 0;
    bottom: 0;
    box-shadow: 25px 0 70px rgba(0, 0, 0, 0.8);
  }

  .sidebar-engine.active {
    left: 0; /* Slide in when toggled */
  }
}

/* Mobile Overlay Backdrop */
.sidebar-mobile-overlay {
  position: fixed;
  inset: 0;
  background-color: rgba(0, 0, 0, 0.75);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: 998;
  animation: fadeInOverlay var(--timing-std) var(--ease-smooth);
}

@keyframes fadeInOverlay {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* ----------------------------------------------------------------------
   üèóÔ∏è 5. SIDEBAR HEADER & CTA COMPONENTS
   ----------------------------------------------------------------------
*/

.sidebar-header-premium {
  padding: 28px 24px;
  background: linear-gradient(to bottom, var(--bg-sidebar), transparent);
}

.sidebar-brand-box {
  display: flex;
  align-items: center;
  gap: 14px;
  margin-bottom: 28px;
  position: relative;
}

.brand-logo-glow {
  width: 36px;
  height: 36px;
  background: var(--accent-soft);
  border: 1px solid var(--accent-main);
  border-radius: var(--radius-sm);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--accent-main);
  font-weight: 900;
  box-shadow: 0 0 20px var(--accent-alpha);
  font-size: 1.1rem;
}

.brand-text-stack {
  display: flex;
  flex-direction: column;
  flex: 1;
}

.brand-text-stack h2 {
  font-size: 1.15rem;
  font-weight: 800;
  color: var(--txt-pure);
  letter-spacing: -0.02em;
}

.brand-version {
  font-size: 0.65rem;
  font-weight: 900;
  color: var(--txt-dim);
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

.sidebar-close-trigger {
  display: none; /* Desktop hidden */
  background: var(--bg-input);
  border: 1px solid var(--brd-main);
  color: var(--txt-muted);
  width: 32px;
  height: 32px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
}

@media (max-width: 1024px) {
  .sidebar-close-trigger {
    display: flex;
  }
}

.sidebar-close-trigger:hover {
  color: var(--txt-pure);
  background: var(--brd-bright);
}

/* New Conversation CTA */
.new-chat-trigger-btn {
  width: 100%;
  padding: 14px 18px;
  background: var(--bg-input);
  border: 1px solid var(--brd-main);
  border-radius: var(--radius-md);
  color: var(--txt-main);
  font-size: 0.95rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 14px;
  cursor: pointer;
  transition: all var(--timing-fast) var(--ease-smooth);
}

.new-chat-trigger-btn:hover {
  background: var(--brd-main);
  border-color: var(--txt-muted);
  transform: translateY(-2px);
  box-shadow: var(--shadow-raised);
}

.new-chat-trigger-btn:active {
  transform: translateY(0);
}

.plus-icon {
  font-size: 1.4rem;
  color: var(--accent-main);
  line-height: 1;
  font-weight: 300;
}

/* ----------------------------------------------------------------------
   üìú 6. HISTORY SCROLLER & SESSION ITEMS
   ----------------------------------------------------------------------
*/

.sidebar-navigation-label {
  padding: 24px 24px 12px;
  font-size: 0.725rem;
  font-weight: 900;
  color: var(--txt-dim);
  text-transform: uppercase;
  letter-spacing: 0.15em;
}

.sidebar-history-scroller {
  flex: 1;
  overflow-y: auto;
  padding: 0 14px 24px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

/* Individual nav items */
.history-nav-item {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 12px 16px;
  border-radius: var(--radius-md);
  cursor: pointer;
  position: relative;
  transition: all var(--timing-fast);
  border: 1px solid transparent;
}

.history-nav-item:hover {
  background-color: var(--bg-input);
  color: var(--txt-pure);
}

/* Highlighting the active CockroachDB session */
.history-nav-item.active {
  background-color: var(--accent-soft);
  border-color: var(--accent-alpha);
  color: var(--txt-pure);
}

.history-nav-item.active::before {
  content: "";
  position: absolute;
  left: -14px;
  top: 50%;
  transform: translateY(-50%);
  width: 4px;
  height: 20px;
  background-color: var(--accent-main);
  border-radius: 0 var(--radius-xs) var(--radius-xs) 0;
  box-shadow: 0 0 10px var(--accent-glow);
}

.nav-item-icon {
  font-size: 1.05rem;
  opacity: 0.6;
}

.nav-item-title-box {
  flex: 1;
  min-width: 0;
}

.nav-item-title {
  display: block;
  font-size: 0.9rem;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ----------------------------------------------------------------------
   ‚ãÆ 7. THREE-DOT MANAGEMENT MENU
   ----------------------------------------------------------------------
   Styling for the session dropdown that allows Rename and Delete.
*/

.session-options-trigger {
  background: transparent;
  border: none;
  color: var(--txt-dim);
  font-size: 1.25rem;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-sm);
  cursor: pointer;
  opacity: 0; /* Only visible on interaction */
  transition: opacity 0.2s, background 0.2s;
}

/* Visiblity logic */
.history-nav-item:hover .session-options-trigger,
.history-nav-item.active .session-options-trigger {
  opacity: 1;
}

.session-options-trigger:hover {
  background: var(--bg-sidebar);
  color: var(--txt-pure);
}

/* Floating Dropdown Component */
.session-dropdown-float {
  position: absolute;
  top: 100%;
  right: 0;
  width: 180px;
  background-color: #1c2128;
  border: 1px solid var(--brd-bright);
  border-radius: var(--radius-md);
  box-shadow: var(--shadow-float);
  padding: 8px;
  z-index: 1001;
  animation: menuPopIn 0.2s var(--ease-pop);
  transform-origin: top right;
}

@keyframes menuPopIn {
  from {
    opacity: 0;
    transform: scale(0.9) translateY(-10px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.dropdown-opt-btn {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 14px;
  background: transparent;
  border: none;
  border-radius: var(--radius-sm);
  color: var(--txt-main);
  font-size: 0.85rem;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s;
}

.dropdown-opt-btn:hover {
  background: rgba(255, 255, 255, 0.05);
}

.dropdown-opt-btn .opt-icon {
  font-size: 1rem;
  opacity: 0.7;
}

.dropdown-divider {
  height: 1px;
  background: var(--brd-main);
  margin: 6px 0;
}

/* Danger State for Delete */
.dropdown-opt-btn.delete-warning {
  color: var(--sys-danger) !important;
}

.dropdown-opt-btn.delete-warning:hover {
  background: rgba(248, 81, 73, 0.1) !important;
}

/* ----------------------------------------------------------------------
   üë§ 8. SIDEBAR FOOTER & USER PROFILE
   ----------------------------------------------------------------------
*/

.sidebar-account-footer {
  padding: 20px;
  background-color: var(--bg-sidebar);
  border-top: 1px solid var(--brd-main);
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.account-card {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 10px;
  border-radius: var(--radius-md);
  background: rgba(255, 255, 255, 0.02);
}

.account-avatar {
  width: 40px;
  height: 40px;
  background: linear-gradient(135deg, var(--accent-main), var(--accent-glow));
  color: var(--txt-pure);
  border-radius: var(--radius-full);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 900;
  font-size: 1rem;
  box-shadow: 0 0 15px var(--accent-alpha);
}

.account-meta {
  display: flex;
  flex-direction: column;
  min-width: 0;
}

.account-name {
  font-size: 0.9rem;
  font-weight: 700;
  color: var(--txt-pure);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.account-tier {
  font-size: 0.65rem;
  font-weight: 800;
  color: var(--accent-main);
  text-transform: uppercase;
  letter-spacing: 0.08em;
}

.account-logout-btn {
  width: 100%;
  padding: 12px;
  background: transparent;
  border: 1px solid var(--brd-main);
  border-radius: var(--radius-md);
  color: var(--txt-dim);
  font-size: 0.75rem;
  font-weight: 800;
  cursor: pointer;
  transition: all 0.2s;
  text-transform: uppercase;
  letter-spacing: 0.1em;
}

.account-logout-btn:hover {
  background: rgba(248, 81, 73, 0.08);
  border-color: rgba(248, 81, 73, 0.3);
  color: var(--sys-danger);
}

/* ----------------------------------------------------------------------
   (End of Part 2/4 - Sidebar & Management Menus)
   ======================================================================
*/
/* ======================================================================
   üöÄ AVNEESH BOT PROJECT: PREMIUM AI INTERFACE (PART 3/4)
   Focus: Glassmorphic Headers, Message Feed, and Persona-Based Themes
   Author: Avneesh Tripathi (CSE student)
   ======================================================================
*/

/* ----------------------------------------------------------------------
   üèõÔ∏è 9. MAIN APPLICATION VIEWPORT (APPLICATION-VIEWPORT)
   ----------------------------------------------------------------------
   The main-content area is a flexible container that holds the header,
   the message feed, and the input zone. It is designed to be a 
   self-contained scroll area.
*/

.application-viewport {
  flex: 1;
  display: flex;
  flex-direction: column;
  height: 100vh;
  background-color: var(--bg-deep-obsidian);
  position: relative;
  overflow: hidden;
  /* Static background with subtle radial gradients for depth */
  background-image: radial-gradient(
      at 0% 0%,
      hsla(253, 16%, 7%, 1) 0,
      transparent 50%
    ),
    radial-gradient(at 50% 0%, hsla(225, 39%, 30%, 0.15) 0, transparent 50%);
  transition: background-color var(--timing-std) var(--ease-smooth);
}

/* ----------------------------------------------------------------------
   üíé 10. GLASSMORPHIC TOP NAVIGATION (MAIN-HEADER-GLASS)
   ----------------------------------------------------------------------
   Uses backdrop-filter for a blurred transparency effect common in 
   modern high-end SaaS dashboards.
*/

.main-header-glass {
  height: 70px;
  padding: 0 32px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: rgba(13, 17, 23, 0.85);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border-bottom: 1px solid var(--brd-main);
  z-index: 100;
  flex-shrink: 0;
  box-shadow: var(--shadow-flat);
}

.header-left-cluster {
  display: flex;
  align-items: center;
  gap: 20px;
}

/* Mobile Hamburger Trigger */
.header-menu-trigger {
  background: var(--bg-input);
  border: 1px solid var(--brd-main);
  color: var(--txt-muted);
  font-size: 1.4rem;
  width: 40px;
  height: 40px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--timing-fast);
}

.header-menu-trigger:hover {
  color: var(--txt-pure);
  border-color: var(--txt-muted);
  background: var(--brd-main);
}

/* Professional Breadcrumb System */
.header-breadcrumb {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 0.95rem;
  font-weight: 600;
}

.bc-root {
  color: var(--txt-dim);
  letter-spacing: 0.02em;
}

.bc-sep {
  color: var(--brd-bright);
  font-size: 0.8rem;
}

.bc-current {
  color: var(--txt-pure);
  max-width: 240px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Right-side Status & Mode Selector */
.header-right-cluster {
  display: flex;
  align-items: center;
  gap: 24px;
}

.status-indicator-box {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 0.7rem;
  font-weight: 900;
  color: var(--txt-muted);
  letter-spacing: 0.1em;
  text-transform: uppercase;
}

.status-dot {
  width: 10px;
  height: 10px;
  border-radius: var(--radius-full);
}

.status-dot.ready {
  background-color: var(--sys-success);
  box-shadow: 0 0 10px var(--sys-success);
}

.status-dot.pulse {
  background-color: var(--sys-warning);
  animation: statusPulseEffect 1.5s infinite var(--ease-smooth);
}

@keyframes statusPulseEffect {
  0% {
    transform: scale(1);
    opacity: 1;
    box-shadow: 0 0 0px var(--sys-warning);
  }
  50% {
    transform: scale(1.4);
    opacity: 0.6;
    box-shadow: 0 0 12px var(--sys-warning);
  }
  100% {
    transform: scale(1);
    opacity: 1;
    box-shadow: 0 0 0px var(--sys-warning);
  }
}

/* Premium Mode Selector Logic */
.premium-mode-select {
  background-color: var(--bg-input);
  border: 1px solid var(--brd-main);
  color: var(--txt-pure);
  padding: 8px 16px;
  border-radius: var(--radius-full);
  font-size: 0.8rem;
  font-weight: 800;
  cursor: pointer;
  outline: none;
  transition: all var(--timing-fast);
  appearance: none; /* Custom dropdown appearance */
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='white'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 14px;
  padding-right: 36px;
}

.premium-mode-select:hover {
  border-color: var(--txt-muted);
  background-color: var(--brd-main);
}

/* ----------------------------------------------------------------------
   üöÄ 11. MESSAGE VIEWPORT & HERO STATES
   ----------------------------------------------------------------------
*/

.message-viewport {
  flex: 1;
  overflow-y: auto;
  padding: 50px 24%; /* Center aligned for better reading flow */
  display: flex;
  flex-direction: column;
  gap: 40px;
  scroll-behavior: smooth;
}

/* Responsive Viewport Adjustments */
@media (max-width: 1440px) {
  .message-viewport {
    padding: 50px 15%;
  }
}
@media (max-width: 1024px) {
  .message-viewport {
    padding: 40px 8%;
  }
}

/* Hero Section */
.chat-hero-container {
  margin: auto;
  max-width: 580px;
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center;
  animation: heroEntrance var(--timing-slow) var(--ease-pop);
}

@keyframes heroEntrance {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.hero-visual-ring {
  width: 120px;
  height: 120px;
  border-radius: var(--radius-full);
  background: radial-gradient(circle, var(--accent-soft) 0%, transparent 80%);
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 32px;
  border: 1px solid var(--brd-main);
  box-shadow: 0 0 40px rgba(35, 134, 54, 0.1);
}

.hero-emoji {
  font-size: 3.5rem;
  filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.2));
}

.hero-title {
  font-size: 2.5rem;
  font-weight: 900;
  margin-bottom: 16px;
  color: var(--txt-pure);
  letter-spacing: -0.04em;
}

.hero-subtitle {
  color: var(--txt-muted);
  margin-bottom: 40px;
  line-height: 1.8;
  font-size: 1.1rem;
}

.hero-suggestions-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 16px;
  width: 100%;
}

.hero-suggestion-card {
  background: var(--bg-sidebar);
  border: 1px solid var(--brd-main);
  color: var(--txt-main);
  padding: 16px;
  border-radius: var(--radius-md);
  cursor: pointer;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  transition: all var(--timing-std);
}

.hero-suggestion-card:hover {
  background: var(--bg-input);
  border-color: var(--accent-main);
  transform: translateY(-5px);
  box-shadow: var(--shadow-raised);
}

.sug-icon {
  font-size: 1.5rem;
}

/* ----------------------------------------------------------------------
   üí¨ 12. MESSAGE BUBBLE ARCHITECTURE
   ----------------------------------------------------------------------
*/

.message-row-v2 {
  display: flex;
  gap: 20px;
  max-width: 90%;
  animation: messagePop var(--timing-std) var(--ease-smooth);
}

@keyframes messagePop {
  from {
    opacity: 0;
    transform: scale(0.98) translateY(10px);
  }
  to {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
}

.message-row-v2.user-align {
  align-self: flex-end;
  flex-direction: row-reverse;
}

.message-row-v2.model-align {
  align-self: flex-start;
}

.message-identity-circle {
  width: 42px;
  height: 42px;
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 900;
  font-size: 0.9rem;
  flex-shrink: 0;
  margin-top: 4px;
  box-shadow: var(--shadow-flat);
}

.user-align .message-identity-circle {
  background: linear-gradient(135deg, var(--accent-main), var(--accent-glow));
  color: var(--txt-pure);
}

.model-align .message-identity-circle {
  background-color: var(--brd-main);
  color: var(--txt-muted);
  border: 1px solid var(--brd-bright);
}

.message-content-bubble {
  padding: 18px 24px;
  border-radius: var(--radius-md);
  font-size: 1.05rem;
  line-height: 1.7;
  position: relative;
  box-shadow: var(--shadow-md);
}

.user-align .message-content-bubble {
  background-color: var(--accent-main);
  color: var(--txt-pure);
  border-top-right-radius: 2px;
}

.model-align .message-content-bubble {
  background-color: var(--bg-sidebar);
  color: var(--txt-main);
  border: 1px solid var(--brd-main);
  border-top-left-radius: 2px;
}

/* ----------------------------------------------------------------------
   üé≠ 13. PERSONA-BASED THEME OVERRIDES
   ----------------------------------------------------------------------
   Dynamic color shifts based on the selected AI persona mode.
*/

/* Savage/Roast Mode (Red Theme) */
.theme-roast {
  --accent-main: #da3633;
  --accent-glow: #f85149;
  --accent-alpha: rgba(218, 54, 51, 0.4);
}

/* Charming/Flirt Mode (Pink Theme) */
.theme-flirt {
  --accent-main: #db61a2;
  --accent-glow: #f692ce;
  --accent-alpha: rgba(219, 97, 162, 0.4);
}

/* Burnout/Depressed Mode (Grey Theme) */
.theme-depressed {
  --accent-main: #484f58;
  --accent-glow: #6e7681;
  --accent-alpha: rgba(72, 79, 88, 0.4);
}

/* Furious/Angry Mode (Bright Red Theme) */
.theme-angry {
  --accent-main: #f85149;
  --accent-glow: #ff7b72;
  --accent-alpha: rgba(248, 81, 73, 0.4);
}

/* Motivation/Positive Mode (Gold Theme) */
.theme-positive {
  --accent-main: #d29922;
  --accent-glow: #e3b341;
  --accent-alpha: rgba(210, 153, 34, 0.4);
}

/* ----------------------------------------------------------------------
   (End of Part 3/4 - Main Viewport & Persona Architecture)
   ======================================================================
*/
/* ======================================================================
   üöÄ AVNEESH BOT PROJECT: PREMIUM AI INTERFACE (PART 4/4)
   Focus: Markdown Logic, Syntax Highlighting, and Input Intelligence
   Author: Avneesh Tripathi (Kanpur, 2025)
   ======================================================================
   
   DOCUMENTATION:
   This final module handles the rendering of complex data structures 
   returned by the AI models (Gemini/Ollama). It ensures that the 
   'history' state is displayed with technical precision.
*/

/* ----------------------------------------------------------------------
   üíª 14. DEVELOPER-GRADE MARKDOWN STYLING
   ----------------------------------------------------------------------
   These styles target the output of ReactMarkdown to ensure a 
   VS Code-like aesthetic for programming assignments.
*/

/* --- Advanced Code Block Container --- */
.code-block-container {
  margin: 24px 0;
  position: relative;
  border-radius: var(--radius-md);
  overflow: hidden;
  border: 1px solid var(--brd-main);
  background-color: #010409; /* Deep contrast for code */
  box-shadow: var(--shadow-raised);
}

.message-content-bubble {
  padding: 24px;
  overflow-x: auto;
  font-family: "Fira Code", "Cascadia Code", "JetBrains Mono", monospace;
  font-size: 0.95rem;
  line-height: 1.6;
  color: #d1d5db;
  background: transparent !important;
}

/* Custom Horizontal Scrollbar for wide code */
.message-content-bubble::-webkit-scrollbar {
  height: 8px;
}

.message-content-bubble::-webkit-scrollbar-thumb {
  background: var(--brd-bright);
  border-radius: var(--radius-full);
}

/* --- Inline Code Highlights --- */
.inline-code-highlight {
  background-color: rgba(255, 255, 255, 0.12);
  color: #4ecca3; /* Tech-Green accent */
  padding: 3px 8px;
  border-radius: var(--radius-xs);
  font-family: "Fira Code", monospace;
  font-size: 0.9em;
  font-weight: 600;
}

/* --- Simulated Syntax Highlighting (Markdown Fallback) --- */
.message-content-bubble code .keyword {
  color: #ff7b72;
  font-weight: 700;
}
.message-content-bubble code .function {
  color: #d2a8ff;
}
.message-content-bubble code .string {
  color: #a5d6ff;
}
.message-content-bubble code .comment {
  color: var(--txt-dim);
  font-style: italic;
}
.message-content-bubble code .number {
  color: #79c0ff;
}
.message-content-bubble code .operator {
  color: #ff7b72;
}

/* --- GitHub Flavored Markdown (GFM) Elements --- */
.message-content-bubble table {
  width: 100%;
  margin: 20px 0;
  border-collapse: separate;
  border-spacing: 0;
  border: 1px solid var(--brd-main);
  border-radius: var(--radius-md);
  overflow: hidden;
  background: rgba(0, 0, 0, 0.2);
}

.chat-bubble th {
  background-color: var(--bg-input);
  color: var(--txt-pure);
  padding: 14px 18px;
  text-align: left;
  font-weight: 800;
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  border-bottom: 2px solid var(--brd-main);
}

.chat-bubble td {
  padding: 12px 18px;
  border-bottom: 1px solid var(--brd-main);
  color: var(--txt-main);
  font-size: 0.95rem;
}

.chat-bubble tr:last-child td {
  border-bottom: none;
}

/* --- Typography Layout in Bubbles --- */
.chat-bubble p {
  margin-bottom: 16px;
}

.chat-bubble p:last-child {
  margin-bottom: 0;
}

.chat-bubble ul,
.chat-bubble ol {
  margin: 16px 0 16px 24px;
}

.chat-bubble li {
  margin-bottom: 8px;
}

.message-content-bubble blockquote {
  margin: 20px 0;
  padding: 12px 24px;
  border-left: 4px solid var(--accent-main);
  background: var(--accent-soft);
  color: var(--txt-muted);
  font-style: italic;
  border-radius: 0 var(--radius-md) var(--radius-md) 0;
}

/* ----------------------------------------------------------------------
   ‚å®Ô∏è 15. INTELLIGENT INPUT ZONE (INPUT-CONTROL-ZONE)
   ----------------------------------------------------------------------
   This section styles the sticky footer that handles the interaction 
   between the user and the Node.js/CockroachDB backend.
*/

.input-control-zone {
  padding: 0 24% 40px; /* Aligned with message feed */
  background: linear-gradient(to top, var(--bg-deep-obsidian) 75%, transparent);
  flex-shrink: 0;
  position: relative;
  z-index: 10;
}

.input-box-modern {
  background-color: var(--bg-sidebar);
  border: 1px solid var(--brd-main);
  border-radius: var(--radius-lg);
  padding: 14px 20px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  box-shadow: var(--shadow-float);
  transition: all var(--timing-std) var(--ease-smooth);
}

.input-box-modern:focus-within {
  border-color: var(--accent-main);
  background-color: #1c2128;
  box-shadow: 0 0 0 4px var(--accent-soft), var(--shadow-float);
}

.input-engine-textarea {
  width: 100%;
  min-height: 28px;
  max-height: 220px;
  background: transparent;
  border: none;
  color: var(--txt-pure);
  font-size: 1.1rem;
  line-height: 1.6;
  resize: none;
  outline: none;
  padding: 8px 0;
  font-weight: 500;
}

.input-engine-textarea::placeholder {
  color: var(--txt-dim);
}

/* Control cluster for send button and metadata */
.input-actions-cluster {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-top: 1px solid var(--brd-main);
  padding-top: 14px;
}

.input-meta-data {
  display: flex;
  gap: 16px;
  align-items: center;
}

.char-count,
.security-tag {
  font-size: 0.65rem;
  font-weight: 800;
  color: var(--txt-dim);
  letter-spacing: 0.1em;
  text-transform: uppercase;
}

.security-tag {
  color: var(--sys-success);
  padding: 2px 6px;
  background: rgba(63, 185, 80, 0.1);
  border-radius: var(--radius-xs);
}

/* Premium Send Action */
.send-action-btn {
  width: 44px;
  height: 44px;
  background: linear-gradient(135deg, var(--accent-main), var(--accent-glow));
  color: white;
  border: none;
  border-radius: var(--radius-md);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all var(--timing-fast) var(--ease-pop);
  box-shadow: 0 4px 12px var(--accent-alpha);
}

.send-action-btn:hover:not(:disabled) {
  transform: scale(1.1) translateY(-2px);
  filter: brightness(1.1);
}

.send-action-btn:disabled {
  background: var(--brd-main);
  color: var(--txt-dim);
  cursor: not-allowed;
  box-shadow: none;
}

.send-svg-icon {
  width: 20px;
  height: 20px;
  fill: currentColor;
}

/* Spinner for active API calls */
.btn-spinner {
  width: 20px;
  height: 20px;
  border: 3px solid rgba(255, 255, 255, 0.3);
  border-top: 3px solid #fff;
  border-radius: var(--radius-full);
  animation: btnSpinEffort 0.6s linear infinite;
}

@keyframes btnSpinEffort {
  to {
    transform: rotate(360deg);
  }
}

.input-system-disclaimer {
  margin-top: 16px;
  text-align: center;
}

.input-system-disclaimer p {
  font-size: 0.75rem;
  color: var(--txt-dim);
  font-weight: 600;
  opacity: 0.8;
}

/* ----------------------------------------------------------------------
   üé≠ 16. COMPREHENSIVE ANIMATION LIBRARY
   ----------------------------------------------------------------------
   Final polish animations to make the UI feel alive and fluid.
*/

/* Pulsing typing indicator */
.typing-pulse-loader span {
  width: 8px;
  height: 8px;
  margin: 0 2px;
  background-color: var(--txt-muted);
  border-radius: var(--radius-full);
  display: inline-block;
  animation: typingBounceEffect 1.4s infinite ease-in-out both;
}

.typing-pulse-loader span:nth-child(1) {
  animation-delay: -0.32s;
}
.typing-pulse-loader span:nth-child(2) {
  animation-delay: -0.16s;
}

@keyframes typingBounceEffect {
  0%,
  80%,
  100% {
    transform: scale(0);
    opacity: 0.3;
  }
  40% {
    transform: scale(1);
    opacity: 1;
  }
}

/* Hero Suggestions Animation */
.hero-suggestion-card {
  animation: slideUpIn 0.8s var(--ease-pop) backwards;
}

.hero-suggestion-card:nth-child(2) {
  animation-delay: 0.1s;
}
.hero-suggestion-card:nth-child(3) {
  animation-delay: 0.2s;
}

@keyframes slideUpIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ----------------------------------------------------------------------
   üì± 17. FINAL RESPONSIVE OVERRIDES (PART 4)
   ----------------------------------------------------------------------
   Ensures the 4-part App.js architecture remains stable on mobile.
*/

@media (max-width: 1024px) {
  .input-control-zone {
    padding: 0 10% 30px;
  }
}

@media (max-width: 768px) {
  .input-control-zone {
    padding: 0 16px 20px;
  }

  .input-box-modern {
    border-radius: var(--radius-md);
    padding: 10px 16px;
  }

  .message-row-v2 {
    max-width: 95%;
    gap: 12px;
  }

  .message-content-bubble {
    padding: 16px;
    font-size: 0.85rem;
  }

  .hero-title {
    font-size: 2rem;
  }

  .hero-suggestions-grid {
    grid-template-columns: 1fr;
  }
}

/* ----------------------------------------------------------------------
   (End of Part 4/4 - Final Project Synchronization)
   ======================================================================
*/
